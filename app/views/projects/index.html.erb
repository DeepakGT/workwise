<div class="search-sec">
  <div class="container">
    <div class="search-box">
      <form>
        <input type="text" name="search" placeholder="Search keywords">
        <button type="submit">Search</button>
      </form>
    </div><!--search-box end-->
  </div>
</div><!--search-sec end-->

<main>
  <div class="main-section">
    <div class="container">
      <div class="main-section-data">
        <div class="row">
          <div class="col-lg-3">
            <div class="filter-secs">
              <div class="filter-heading">
                <h3>Filters</h3>
                <a id='clear-all' href="#" title="">Clear all filters</a>
              </div><!--filter-heading end-->
              <div class="paddy">
                <div class="filter-dd">
                  <div class="filter-ttl">
                    <h3>Skills</h3>
                    <a href="#" title="">Clear</a>
                  </div>
                  <form>
                    <input type="text" name="search-skills" placeholder="Search skills">
                  </form>
                </div>
                <div class="filter-dd">
                  <div class="filter-ttl">
                    <h3>Availabilty</h3>
                    <a href="#" title="">Clear</a>
                  </div>
                  <ul class="avail-checks">
                    <li>
                      <input type="radio" name="cc" id="c1">
                      <label for="c1">
                        <span></span>
                      </label>
                      <small>Hourly</small>
                    </li>
                    <li>
                      <input type="radio" name="cc" id="c2">
                      <label for="c2">
                        <span></span>
                      </label>
                      <small>Part Time</small>
                    </li>
                    <li>
                      <input type="radio" name="cc" id="c3">
                      <label for="c3">
                        <span></span>
                      </label>
                      <small>Full Time</small>
                    </li>
                  </ul>
                </div>
                <div class="filter-dd">
                  <div class="filter-ttl">
                    <h3>Job Type</h3>
                    <a href="#" title="">Clear</a>
                  </div>
                  <form class="job-tp">
                    <select>
                      <option>Select a job type</option>
                      <option>Select a job type</option>
                      <option>Select a job type</option>
                      <option>Select a job type</option>
                    </select>
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                  </form>
                </div>
                <div class="filter-dd">
                  <div class="filter-ttl">
                    <h3>Pay Rate / Hr ($)</h3>
                    <a href="#" title="">Clear</a>
                  </div>
                  <div class="rg-slider">
                    <input class="rn-slider slider-input" type="hidden" value="5,50" />
                  </div>
                  <div class="rg-limit">
                    <h4>1</h4>
                    <h4>100+</h4>
                  </div><!--rg-limit end-->
                </div>
                <div class="filter-dd">
                  <div class="filter-ttl">
                    <h3>Experience Level</h3>
                    <a href="#" title="">Clear</a>
                  </div>
                  <form class="job-tp">
                    <select>
                      <option>Select a experience level</option>
                      <option>3 years</option>
                      <option>4 years</option>
                      <option>5 years</option>
                    </select>
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                  </form>
                </div>
                <div class="filter-dd">
                  <div class="filter-ttl">
                    <h3>Countries</h3>
                    <a href="#" title="">Clear</a>
                  </div>
                  <form class="job-tp">
                    <select>
                      <option>Select a country</option>
                      <option>United Kingdom</option>
                      <option>United States</option>
                      <option>Russia</option>
                    </select>
                    <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                  </form>
                </div>
              </div>
            </div><!--filter-secs end-->
          </div>
          <div class="project-container col-lg-6">
            <div class="main-ws-sec">
              <div class="posts-section">
                <% @projects.map do |project| %>
                  <div class="post-bar">
                    <div class="post_topbar">
                      <div class="usy-dt">
                        <%= image_tag("resources/us-pic.png", alt: "") %>
                        <div class="usy-name">
                          <h3><%= project.uploader.decorate.full_name.titleize %></h3>
                          <span><%= image_tag asset_path('clock.png') %><%= time_ago_in_words(project.created_at)+ ' ago' %></span>
                        </div>
                      </div>
                      <div class="ed-opts">
                        <a href="#" title="" class="ed-opts-open"><i class="la la-ellipsis-v"></i></a>
                        <ul class="ed-options">
                          <li><a href="#" title="">Edit Post</a></li>
                          <li><a href="#" title="">Unsaved</a></li>
                          <li><a href="#" title="">Unbid</a></li>
                          <li><a href="#" title="">Close</a></li>
                          <li><a href="#" title="">Hide</a></li>
                        </ul>
                      </div>
                    </div>
                    <div class="epi-sec">
                      <ul class="descp">
                        <li><%= image_tag asset_path('icon8.png') %><span><%= project.uploader.profession.titleize %></span></li>
                        <li><%= image_tag asset_path('icon9.png') %><span><%= project.uploader.country.titleize %></span></li>
                      </ul>
                      <ul class="bk-links">
                        <li><a href="#" title=""><i class="la la-bookmark"></i></a></li>
                        <li><a href="#" title=""><i class="la la-envelope"></i></a></li>
                        <li><a href="#" title="" class="bid_now">Bid Now</a></li>
                      </ul>
                    </div>
                    <div class="job_descp">
                      <h3><%= project.title.titleize %></h3>
                      <ul class="job-dt">
                        <% if project.min_total_price.present? %>
                          <li><span><%= "$#{project.min_total_price.to_i} - $#{project.max_total_price.to_i}" %></span></li>
                        <% elsif project.min_per_hour_price.present? %>
                          <li><span><%= "$#{project.min_per_hour_price.to_i} - $#{project.max_per_hour_price.to_i}" %> / hour</span></li>
                        <% end %>
                      </ul>
                      <p class='description'><%= "#{project.description[0..150]}..." %> <a href="#" title="">view more</a></p>
                      <ul class="skill-tags">
                        <% project.skills.each do |skill| %>
                          <li><a href="javascript:void(0)" title="<%= skill.title %>"><%= skill.title %></a></li>
                        <% end %>
                      </ul>
                    </div>
                    <div class="job-status-bar">
                      <ul class="like-com">
                        <li>
                          <a href="/likes/toggle_like_dislike" class=" <%= !!project.likes.find_by(user_id: current_user&.id) ? 'active' : '' %> " data-likeable_type='Project' data-likeable_id='<%= project.id %>'>
                            <i class="fas fa-heart"></i> Like 
                          </a>
                          <%= image_tag asset_path('liked-img.png') %>
                          <span><%= project.likes.count %></span>
                        </li>
                        <li><a href="#" class="com"><i class="fas fa-comment-alt"></i> Comments <custom><%= project.comments.count %></custom></a></li>
                      </ul>
                      <a href="#"><i class="fas fa-eye"></i>Views <%= project.views.count %></a>
                    </div>
                  </div><!--post-bar end-->
                <% end %>
                <div class="process-comm">
                  <div class="spinner">
                    <div class="bounce1"></div>
                    <div class="bounce2"></div>
                    <div class="bounce3"></div>
                  </div>
                </div><!--process-comm end-->
              </div><!--posts-section end-->
            </div><!--main-ws-sec end-->
          </div>
          <div class="col-lg-3">
            <div class="right-sidebar">
              <div class="widget widget-about">
                <%= image_tag asset_path('wd-logo.png') %>
                <h3>Track Time on Workwise</h3>
                <span>Pay only for the Hours worked</span>
                <div class="sign_link">
                  <h3><a href="sign-in.html" title="">Sign up</a></h3>
                  <a href="#" title="">Learn More</a>
                </div>
              </div><!--widget-about end-->
              <div class="widget widget-jobs">
                <div class="sd-title">
                  <h3>Top Jobs</h3>
                  <i class="la la-ellipsis-v"></i>
                </div>
                <div class="jobs-list">
                  <div class="job-info">
                    <div class="job-details">
                      <h3>Senior Product Designer</h3>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit..</p>
                    </div>
                    <div class="hr-rate">
                      <span>$25/hr</span>
                    </div>
                  </div><!--job-info end-->
                  <div class="job-info">
                    <div class="job-details">
                      <h3>Senior UI / UX Designer</h3>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit..</p>
                    </div>
                    <div class="hr-rate">
                      <span>$25/hr</span>
                    </div>
                  </div><!--job-info end-->
                  <div class="job-info">
                    <div class="job-details">
                      <h3>Junior Seo Designer</h3>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit..</p>
                    </div>
                    <div class="hr-rate">
                      <span>$25/hr</span>
                    </div>
                  </div><!--job-info end-->
                  <div class="job-info">
                    <div class="job-details">
                      <h3>Senior PHP Designer</h3>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit..</p>
                    </div>
                    <div class="hr-rate">
                      <span>$25/hr</span>
                    </div>
                  </div><!--job-info end-->
                  <div class="job-info">
                    <div class="job-details">
                      <h3>Senior Developer Designer</h3>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit..</p>
                    </div>
                    <div class="hr-rate">
                      <span>$25/hr</span>
                    </div>
                  </div><!--job-info end-->
                </div><!--jobs-list end-->
              </div><!--widget-jobs end-->
              <div class="widget widget-jobs">
                <div class="sd-title">
                  <h3>Most Viewed This Week</h3>
                  <i class="la la-ellipsis-v"></i>
                </div>
                <div class="jobs-list">
                  <div class="job-info">
                    <div class="job-details">
                      <h3>Senior Product Designer</h3>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit..</p>
                    </div>
                    <div class="hr-rate">
                      <span>$25/hr</span>
                    </div>
                  </div><!--job-info end-->
                  <div class="job-info">
                    <div class="job-details">
                      <h3>Senior UI / UX Designer</h3>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit..</p>
                    </div>
                    <div class="hr-rate">
                      <span>$25/hr</span>
                    </div>
                  </div><!--job-info end-->
                  <div class="job-info">
                    <div class="job-details">
                      <h3>Junior Seo Designer</h3>
                      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit..</p>
                    </div>
                    <div class="hr-rate">
                      <span>$25/hr</span>
                    </div>
                  </div><!--job-info end-->
                </div><!--jobs-list end-->
              </div><!--widget-jobs end-->
            </div><!--right-sidebar end-->
          </div>
        </div>
      </div><!-- main-section-data end-->
    </div> 
  </div>
</main>


<script>

    function clearFilter(filterSection) {
        const input = filterSection.querySelector('input[type="text"]');
        if (input) {
            input.value = '';
        }

        const radios = filterSection.querySelectorAll('input[type="radio"]');
        radios.forEach(radio => {
            radio.checked = false;
        });

        const select = filterSection.querySelector('select');
        if (select) {
            select.selectedIndex = 0;
        }

        const slider = filterSection.querySelector('.slider-input');
        if (slider) {
            resetSlider();
        }
    }

  var bindEventsOnFilter = function() {
    document.querySelectorAll('.filter-dd .filter-ttl a').forEach(clearBtn => {
        clearBtn.addEventListener('click', (event) => {
            event.preventDefault();
            const filterSection = clearBtn.closest('.filter-dd');
            clearFilter(filterSection);
        });
    });

    // Clear all filters
    const clearAllBtn = document.getElementById('clear-all');
    if (clearAllBtn) {
        clearAllBtn.addEventListener('click', (event) => {
            event.preventDefault();
            document.querySelectorAll('.filter-dd').forEach(filterSection => {
                clearFilter(filterSection);
            });
        });
    }
  }

  function initializeSlider() {
    $('.rn-slider').jRange({
        from: 0,
        to: 100,
        step: 1,
        scale: [],
        format: '%s',
        width: 300,
        showLabels: true,
        isRange: true
    });
  }

  function resetSlider() {
      // Remove the existing slider input
      $('.rn-slider').remove();
      $('.slider-container').remove();
      
      // Recreate the slider input element
      $('<input class="rn-slider slider-input" type="hidden" value="5,50" />').appendTo('.rg-slider');
      
      // Reinitialize the slider
      initializeSlider();
  }

  $(document).ready(function(){
    bindEventsOnFilter();
  })

</script>
